<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>¬øQuieres ser mi Valentine?</title>

<style>
body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: radial-gradient(circle at top, #ffd1dc, #ff7eb3 40%, #ff4d6d 100%);
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  overflow: hidden;
  color: #fff;
  padding: 16px;
  box-sizing: border-box;
}

.container {
  text-align: center;
  padding: 28px 22px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.12);
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
  max-width: 520px;
  width: min(94vw, 520px);
}

h1 {
  font-size: clamp(1.9rem, 6vw, 2.8rem);
  color: #fff;
  margin-bottom: 12px;
  animation: latido 1.2s infinite;
}

p.subtitulo {
  font-size: 1.05rem;
  margin: 0 0 18px;
  color: rgba(255, 255, 255, 0.9);
}

.estado {
  font-size: 1rem;
  margin: 0 0 18px;
  color: rgba(255, 255, 255, 0.95);
  min-height: 24px;
}

.botonera {
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: stretch;
}

@keyframes latido{
  0%{transform:scale(1)}
  50%{transform:scale(1.05)}
  100%{transform:scale(1)}
}

button {
  font-size: 1.1rem;
  padding: 14px 20px;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  font-weight: 600;
  width: 100%;
}

button:focus-visible {
  outline: 3px solid #fff;
  outline-offset: 3px;
}

#si {
  background: #ff4d6d;
  color: white;
  box-shadow: 0 10px 20px rgba(255, 77, 109, 0.4);
}

#no {
  background: rgba(0, 0, 0, 0.5);
  color: white;
}

.final {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at top, #ff9a9e, #ff4d6d 60%, #1b1b1b 100%);
  color: white;
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  text-align: center;
  font-size: clamp(2rem, 5vw, 3rem);
  animation: fade 1s forwards;
  padding: 24px;
}

.final p {
  font-size: 1.25rem;
  margin-top: 12px;
  max-width: 720px;
}

.final ul {
  list-style: none;
  padding: 0;
  margin: 18px 0 0;
  font-size: 1.05rem;
  display: grid;
  gap: 8px;
}

.final li {
  background: rgba(255, 255, 255, 0.15);
  padding: 10px 14px;
  border-radius: 14px;
}

@keyframes fade{
  from{opacity:0}
  to{opacity:1}
}

.corazon {
  position: absolute;
  font-size: 2rem;
  animation: flotar 4s linear infinite;
  pointer-events: none;
}

.sparkle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.9);
  animation: brillo 2s ease-out forwards;
  pointer-events: none;
}

@keyframes flotar{
  0%{transform:translateY(0);opacity:1}
  100%{transform:translateY(-100vh);opacity:0}
}

@keyframes brillo {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(0); opacity: 0; }
}

@media (min-width: 600px) {
  .botonera {
    flex-direction: row;
    justify-content: center;
  }

  button {
    width: auto;
    min-width: 180px;
  }
}
</style>
</head>

<body>

<div class="container" id="pregunta" aria-live="polite">
  <h1>¬øQuieres ser mi Valentine? ‚ù§Ô∏è</h1>
  <p class="subtitulo">Prometo risas, caf√© y un plan precioso contigo.</p>
  <p class="estado" id="estado">Solo vale tocar con cari√±o üòè</p>
  <div class="botonera" id="botonera">
    <button id="si" type="button">S√≠, quiero</button>
    <button id="no" type="button">No por ahora</button>
  </div>
</div>

<div class="final" id="final" role="dialog" aria-live="assertive">
  <div>üíò ¬°Gracias por decir s√≠! üíò</div>
  <p id="mensaje"></p>
  <ul id="lista"></ul>
</div>

<script>
"use strict";

/**
 * Configuraci√≥n centralizada para facilitar cambios futuros.
 */
const CONFIG = Object.freeze({
  yesScaleStep: 0.15,
  yesScaleMax: 1.8,
  heartsIntervalMs: 220,
  heartsLifetimeMs: 4000,
  sparkleLifetimeMs: 2000,
  noButtonDodgePx: 120,
  finalMessage: "Gracias por hacer este momento especial. Ahora s√≠, ¬°planazo contigo!",
  yesButtonAltText: "¬øSegura? üòâ",
  yesUnlockTaps: 10,
  funnyResponses: [
    "Uy, casi‚Ä¶ pero no üòú",
    "Te vi, picarona/o üòè",
    "El bot√≥n se hace el t√≠mido ü§≠",
    "Sigue intentando, vas bien üíò",
    "¬°Jaja! Eso estuvo cerca üòÇ",
    "Recalculando sentimientos‚Ä¶ ü§ñ",
    "Modo travieso activado ‚ú®",
    "Ups, se movi√≥ solo üôà",
    "No tan r√°pido, cupido üèπ",
    "Te debo una risa m√°s üòÜ",
  ],
  funnyFinalList: [
    "Un meme sorpresa personalizado",
    "Un baile rid√≠culo de 10 segundos",
    "Un brindis con tu bebida favorita",
    "Un mini reto: 3 piropos creativos",
    "Un abrazo nivel oso üêª",
  ],
  labelPairs: [
    ["S√≠, obvio", "Nope"],
    ["Acepto", "Me hago el/la dif√≠cil"],
    ["Dale", "Ni en broma"],
    ["S√≠√≠√≠", "No‚Ä¶ tal vez"],
  ],
});

const state = {
  yesScale: 1,
  heartsTimerId: null,
  tapCount: 0,
};

/**
 * Recupera un elemento requerido y lanza un error si no existe.
 * @param {string} id
 * @returns {HTMLElement}
 */
function getRequiredElement(id) {
  const element = document.getElementById(id);
  if (!element) {
    throw new Error(`Elemento requerido no encontrado: ${id}`);
  }
  return element;
}

/**
 * Inicializa referencias a elementos del DOM.
 */
function createDomRefs() {
  return {
    yesButton: getRequiredElement("si"),
    noButton: getRequiredElement("no"),
    questionContainer: getRequiredElement("pregunta"),
    finalContainer: getRequiredElement("final"),
    finalMessage: getRequiredElement("mensaje"),
    finalList: getRequiredElement("lista"),
    statusMessage: getRequiredElement("estado"),
  };
}

/**
 * Actualiza la escala del bot√≥n de aceptaci√≥n.
 * @param {HTMLButtonElement} yesButton
 */
function updateYesButtonScale(yesButton) {
  state.yesScale = Math.min(state.yesScale + CONFIG.yesScaleStep, CONFIG.yesScaleMax);
  yesButton.style.transform = `scale(${state.yesScale})`;
}

/**
 * Mueve el bot√≥n "No" de forma segura dentro del viewport.
 * @param {HTMLButtonElement} noButton
 */
function dodgeNoButton(noButton) {
  const randomX = (Math.random() - 0.5) * CONFIG.noButtonDodgePx;
  const randomY = (Math.random() - 0.5) * CONFIG.noButtonDodgePx;
  noButton.style.transform = `translate(${randomX}px, ${randomY}px)`;
}

/**
 * Cambia etiquetas y orden de botones de forma aleatoria.
 * @param {ReturnType<typeof createDomRefs>} dom
 */
function shuffleButtons(dom) {
  const pair = CONFIG.labelPairs[Math.floor(Math.random() * CONFIG.labelPairs.length)];
  dom.yesButton.textContent = pair[0];
  dom.noButton.textContent = pair[1];

  const swap = Math.random() > 0.5;
  dom.yesButton.style.order = swap ? "2" : "1";
  dom.noButton.style.order = swap ? "1" : "2";
}

/**
 * Muestra un mensaje divertido.
 * @param {ReturnType<typeof createDomRefs>} dom
 */
function showFunnyMessage(dom) {
  const message = CONFIG.funnyResponses[Math.floor(Math.random() * CONFIG.funnyResponses.length)];
  dom.statusMessage.textContent = message;
}

/**
 * Genera un coraz√≥n flotante.
 */
function createHeart() {
  const heart = document.createElement("div");
  heart.className = "corazon";
  heart.textContent = "‚ù§Ô∏è";
  heart.style.left = `${Math.random() * 100}vw`;
  heart.style.bottom = "0px";
  document.body.appendChild(heart);

  window.setTimeout(() => heart.remove(), CONFIG.heartsLifetimeMs);
}

/**
 * Genera un brillo breve en el centro.
 */
function createSparkle() {
  const sparkle = document.createElement("div");
  sparkle.className = "sparkle";
  sparkle.style.left = `${50 + (Math.random() - 0.5) * 20}%`;
  sparkle.style.top = `${45 + (Math.random() - 0.5) * 20}%`;
  document.body.appendChild(sparkle);

  window.setTimeout(() => sparkle.remove(), CONFIG.sparkleLifetimeMs);
}

/**
 * Inicia animaciones de celebraci√≥n.
 */
function startCelebration() {
  if (state.heartsTimerId) {
    return;
  }

  state.heartsTimerId = window.setInterval(createHeart, CONFIG.heartsIntervalMs);
  window.setInterval(createSparkle, CONFIG.sparkleLifetimeMs);
}

/**
 * Maneja el flujo de aceptaci√≥n.
 * @param {ReturnType<typeof createDomRefs>} dom
 */
function handleYesClick(dom) {
  state.tapCount += 1;
  updateYesButtonScale(dom.yesButton);
  showFunnyMessage(dom);
  shuffleButtons(dom);

  if (state.tapCount < CONFIG.yesUnlockTaps) {
    dodgeNoButton(dom.noButton);
    return;
  }

  dom.questionContainer.style.display = "none";
  dom.finalContainer.style.display = "flex";
  dom.finalMessage.textContent = CONFIG.finalMessage;
  dom.finalList.innerHTML = CONFIG.funnyFinalList.map((item) => `<li>${item}</li>`).join("");
  startCelebration();
}

/**
 * Maneja el flujo de rechazo juguet√≥n.
 * @param {ReturnType<typeof createDomRefs>} dom
 */
function handleNoClick(dom) {
  state.tapCount += 1;
  updateYesButtonScale(dom.yesButton);
  dom.yesButton.textContent = CONFIG.yesButtonAltText;
  showFunnyMessage(dom);
  shuffleButtons(dom);
  dodgeNoButton(dom.noButton);
}

/**
 * Registra eventos de interacci√≥n.
 * @param {ReturnType<typeof createDomRefs>} dom
 */
function registerEventHandlers(dom) {
  dom.noButton.addEventListener("click", () => handleNoClick(dom));
  dom.noButton.addEventListener("mouseenter", () => dodgeNoButton(dom.noButton));
  dom.yesButton.addEventListener("click", () => handleYesClick(dom));
  dom.noButton.addEventListener("touchstart", () => dodgeNoButton(dom.noButton), { passive: true });
  dom.yesButton.addEventListener("touchstart", () => handleYesClick(dom), { passive: true });
}

/**
 * Inicializa la experiencia.
 */
function init() {
  try {
    const dom = createDomRefs();
    registerEventHandlers(dom);
  } catch (error) {
    console.error("Error al inicializar la p√°gina:", error);
    alert("Ocurri√≥ un error al iniciar la experiencia. Intenta recargar.");
  }
}

init();
</script>

</body>
</html>
